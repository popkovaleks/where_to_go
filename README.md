# Афиша

Это учебный проект по созданию аналога Яндекс.Афиши. Отображает на карте точки, по нажатии на которые можно просмотреть информацию о месте в всплывающем справа сайдбаре. Добавление, редактирование и удаление мест происходит через панель администратора Django.

[Пример работы сайта](http://popkovaleks.pythonanywhere.com)

## Установка

Для начала необходимо создать виртуальное окружение и активировать его.
Подробнее об установке виртуального окружения и его запуске можно почитать в [документации](https://virtualenv.pypa.io/en/latest/index.html).

Перед запуском проекта необходимо установить все зависимости с помощью команды
```
pip3 install -r requirements.txt
```
Команду необходимо запускать из в корневой директории проекта.

После этого в директории  where_to_go, там же, где находится модуль settings.py необходимо создать файл .env с описанными в нем переменными окружения:
```
SECRET_KEY=
ALLOWED_HOSTS=
DB_NAME=
STATIC_URL=
STATIC_ROOT=
MEDIA_URL=
MEDIA_ROOT=
DEBUG=
```
Описание всех переменных окружения можно найти в [документации](https://docs.djangoproject.com/en/3.0/howto/deployment/checklist/).

Пример заполнения файла .env на локальной машине:
```
SECRET_KEY=<secret key>
ALLOWED_HOSTS=127.0.0.1,
DB_NAME='db.sqlite3'
STATIC_URL='/static/'
STATIC_ROOT='where_to_go/static_files'
MEDIA_URL='/media/'
MEDIA_ROOT='where_to_go/media'
DEBUG=True
```
Тестовый запуск на локальной машине можно осуществить с помощью команды:
```
python3 manage.py runserver
```
## Загрузка новых мест в базу данных
Осуществить загрузку новых мест можно с помощью команды
```
python3 manage.py load_place http://адрес/файла.json
```
### Пример json файла для загрузки
```
{
    "title": "Дом, где снимался фильм «Покровские ворота»",
    "imgs": [
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/e0b99a928f9556c536052985ed3589c1.jpg",
        "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/b44dad033816d571ee16194f7292a7b8.jpg"
    ],
    "description_short": "Все помнят начало фильма «Покровские ворота»: уже взрослый Костя с грустью смотрит на то, как рушат дом, где прошла его молодость. И как финал — внезапно заигравший граммофон посреди обломков здания, от которого зритель испытывал внезапную тоску. На самом деле здание не сломали, его можно увидеть и сейчас.",
    "description_long": "<p>Тот самый дом, где Костя получал передышку от свидания с Москвой, которая «яростно обвивала его, то Бульварным кольцом, то Садовым, и тянула его сквозь улицы и заворачивала в переулки», стоит на месте.</p><p>И хоть он претерпел реконструкцию в 90-е годы, в нём можно узнать тот самый уютный дворик пятидесятых годов, где жил «Тайный эротоман Хоботов», его жена — «святая женщина» — Маргарита Павловна и другие обитатели коммунального рая.</p><p>Правда, есть некоторые сомнения в правильности этого утверждения, так как в доме не может быть такой лестницы, как показывали в фильме (помните, как убегала Людочка?), но это уже детали. В конце концов, её тоже могли реконструировать.</p>",
    "coordinates": {
        "lng": "37.59863599999999",
        "lat": "55.74606099999999"
    }
}
```
